<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Task Manager</title>
	<style>
	h1{
		margin:10px 0px;
		border-top: 3px solid blue;
		border-bottom: 3px solid blue;
		background-color: lightblue;
		padding: 10px 0px;

	}
	.completed {
		color : red;
		font-style: italic;
		text-decoration: line-through;
	}
	.style1{
		color : red;
	}
	.style2 {
		font-style: italic;
	}
	</style>
	<script>
		function addTask(){
			var taskName = document.getElementById("txtTask").value;
			var taskList = document.getElementById("ulTaskList");
			
			/* Bad approach */
			//var newTaskNode = "<li>" + taskName + "</li>";
			//taskList.innerHTML = taskList.innerHTML + newTaskNode;
			/*****************************************************/

			var newTaskNode = document.createElement("li");
			newTaskNode.innerHTML = taskName;
			newTaskNode.addEventListener("click",onTaskItemClick);
			taskList.appendChild(newTaskNode);

		}
		function initialize(){
			document.getElementById("btnAddTask").addEventListener("click",addTask);
			document.getElementById("btnRemoveCompletedTasks").addEventListener("click",removeCompletedTasks);
			asignTaskItemClickHandlers();
		}

		function removeCompletedTasks(){
			var taskList = document.getElementById("ulTaskList");
			for(var i=taskList.children.length-1;i>=0;i--){
				var taskItem = taskList.children[i];
				if (taskItem.classList.contains("completed")){
					taskList.removeChild(taskItem);
				}
			}
		}

		function asignTaskItemClickHandlers(){
			var allTasks = document.getElementsByTagName("li");
			for(var i=0;i<allTasks.length;i++){
				allTasks[i].addEventListener("click",onTaskItemClick);
			}
		}
		function onTaskItemClick(){
			this.className = "completed";
		}
		document.addEventListener("DOMContentLoaded", initialize);

	</script>
</head>
<body>
	<h1>Task Manager</h1>
	<span>Task :</span>
	<input type="text" name="" id="txtTask">
	<input type="button" value="Add Task" id="btnAddTask">
	<input type="button" value="Remove Completed Tasks" id="btnRemoveCompletedTasks">
	<ol id="ulTaskList">
		<li>Dummy Task - 1</li>
		<li>Dummy Task - 2</li>
		<li>Dummy Task - 11</li>
		<li>Dummy Task - 22</li>
	</ol>
	<div id="divMessage" class="style1 style2">[A div for displaying messages]</div>
</body>
</html>